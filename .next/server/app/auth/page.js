(()=>{var e={};e.id=235,e.ids=[235],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},31403:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>h,pages:()=>p,routeModule:()=>d,tree:()=>c}),r(54339),r(96199),r(35866);var s=r(23191),a=r(88716),o=r(37922),n=r.n(o),i=r(95231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let c=["",{children:["auth",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,54339)),"/home/mst/Desktop/lowAI/frontend/src/app/auth/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,96199)),"/home/mst/Desktop/lowAI/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],p=["/home/mst/Desktop/lowAI/frontend/src/app/auth/page.tsx"],h="/auth/page",u={require:r,loadChunk:()=>Promise.resolve()},d=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/auth/page",pathname:"/auth",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},90709:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,12994,23)),Promise.resolve().then(r.t.bind(r,96114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,79671,23)),Promise.resolve().then(r.t.bind(r,41868,23)),Promise.resolve().then(r.t.bind(r,84759,23))},33272:(e,t,r)=>{Promise.resolve().then(r.bind(r,37774)),Promise.resolve().then(r.bind(r,28993))},88914:(e,t,r)=>{Promise.resolve().then(r.bind(r,24906))},37774:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var s=r(10326),a=r(80936),o=r(77109);let n=()=>{let{data:e,status:t}=(0,o.useSession)();return"authenticated"===t&&(a.y.defaults.headers.Authorization=`Bearer ${e?.user.accessToken}`),"unauthenticated"===t&&(a.y.defaults.headers.Authorization=""),s.jsx(s.Fragment,{})},i=function({children:e}){return(0,s.jsxs)(o.SessionProvider,{children:[s.jsx(n,{}),e]})}},24906:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(10326),a=r(17577),o=r(52170),n=r(24017),i=r(10859),l=r(80936);function c({onOtpSent:e}){let[t,r]=(0,a.useState)(""),[c,p]=(0,a.useState)(!1),h=(0,a.useRef)(null),u=async()=>{if(!/^09\d{9}$/.test(t)){o.ZP.error("شماره موبایل معتبر نیست");return}p(!0);try{let r=await l.Z.createOtp({mobile:t});console.log(r),r?.isSuccess?(o.ZP.success("کد ارسال شد"),e(t)):o.ZP.error(r.message||"ارسال کد ناموفق بود")}catch{o.ZP.error("خطا در ارتباط با سرور")}finally{p(!1)}};return(0,s.jsxs)("div",{className:"space-y-6 w-full max-w-md mx-auto rounded-xl  bg-white",children:[s.jsx("div",{className:"text-center text-lg font-semibold text-gray-700",children:"ورود با شماره موبایل"}),s.jsx(n.default,{ref:h,size:"large",placeholder:"مثلاً: 09123456789",value:t,onChange:e=>r(e.target.value),className:"text-right",inputMode:"numeric",maxLength:11}),s.jsx(i.ZP,{type:"primary",block:!0,className:"h-12 rounded-lg text-base full px-6 py-3 bg-blue-600 text-white hover:bg-blue-700 transition",loading:c,onClick:u,children:"ارسال کد"})]})}var p=r(35047),h=r(77109);function u({mobile:e}){let[t,r]=(0,a.useState)(["","","","",""]),[l,c]=(0,a.useState)(!1),u=(0,p.useRouter)(),d=(0,a.useRef)([]),m=(e,s)=>{if(/^\d?$/.test(s)){let a=[...t];a[e]=s,r(a),s&&e<t.length-1&&d.current[e+1]?.focus()}},f=(e,r)=>{"Backspace"===r.key&&!t[e]&&e>0&&d.current[e-1]?.focus()},x=async()=>{let r=t.join("");if(r.length<5){o.ZP.error("کد ناقص است");return}c(!0);try{console.log(r,e);let t=await (0,h.signIn)("credentials",{redirect:!1,mobile:e,code:r});if(console.log("REDDDD",t?.ok),t?.ok){await new Promise(e=>setTimeout(e,500));let e=await (0,h.getSession)();e?.user?.accessToken?(o.ZP.success("ورود موفق"),u.replace("/dashboard")):o.ZP.error("خطا در دریافت سشن"),o.ZP.success("ورود موفق"),u.replace("/dashboard")}else o.ZP.error("کد اشتباه است یا مشکلی رخ داده")}catch{o.ZP.error("خطا در ارتباط با سرور")}finally{c(!1)}};return(0,s.jsxs)("div",{className:"space-y-6",dir:"ltr",children:[s.jsx("div",{className:"flex flex-row justify-center gap-2",children:t.map((e,t)=>s.jsx(n.default,{ref:e=>d.current[t]=e,maxLength:1,value:e,onChange:e=>m(t,e.target.value),onKeyDown:e=>f(t,e),className:"w-12 h-12 text-center text-xl",inputMode:"numeric"},t))}),s.jsx(i.ZP,{type:"primary",block:!0,className:"h-12 rounded-lg text-base full px-6 py-3 bg-blue-600 text-white hover:bg-blue-700 transition",loading:l,onClick:x,children:"تأیید"})]})}function d(){let[e,t]=(0,a.useState)("");return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 px-4",children:(0,s.jsxs)("div",{className:"bg-white shadow-md rounded-2xl p-8 w-full max-w-md",children:[s.jsx("h2",{className:"text-2xl font-semibold mb-6 text-center text-gray-700",children:"ورود / ثبت‌نام"}),e?s.jsx(u,{mobile:e}):s.jsx(c,{onOtpSent:t})]})})}},28993:(e,t,r)=>{"use strict";r.d(t,{RTProvider:()=>l});var s=r(10326),a=r(89043),o=r(20962);let n=(0,a.xC)({reducer:{modals:o.ZP},devTools:!0});var i=r(9543);function l({children:e}){return s.jsx(i.zt,{store:n,children:e})}},20962:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>n,e_:()=>a});let s=(0,r(89043).oM)({name:"modals",initialState:{openPaymentModal:!1,openLogoutModal:!1},reducers:{openPaymentModalToggle(e,{payload:t}){e.openPaymentModal=t},openLogoutModalToggle(e,{payload:t}){e.openLogoutModal=t}}}),{openPaymentModalToggle:a,openLogoutModalToggle:o}=s.actions,n=s.reducer},80936:(e,t,r)=>{"use strict";r.d(t,{y:()=>n,Z:()=>i});var s=r(44099);class a{constructor(e,t){this.jsonParseReviver=void 0,this.instance=t||s.Z.create(),this.baseUrl=null!=e?e:"/"}createOtp(e,t){let r=this.baseUrl+"/api/auth/create-otp";r=r.replace(/[?&]$/,"");let s={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(s).catch(e=>{if(o(e)&&e.response)return e.response;throw e}).then(e=>this.processCreateOtp(e))}processCreateOtp(e){e.status;let t={};if(e.headers&&"object"==typeof e.headers)for(let r in e.headers)e.headers.hasOwnProperty(r)&&(t[r]=e.headers[r]);{let t=e.data;return Promise.resolve(JSON.parse(t))}}checkOtp(e,t){let r=this.baseUrl+"/api/auth/check-otp";r=r.replace(/[?&]$/,"");let s={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(s).catch(e=>{if(o(e)&&e.response)return e.response;throw e}).then(e=>this.processCheckOtp(e))}processCheckOtp(e){e.status;let t={};if(e.headers&&"object"==typeof e.headers)for(let r in e.headers)e.headers.hasOwnProperty(r)&&(t[r]=e.headers[r]);{let t=e.data;return Promise.resolve(JSON.parse(t))}}createChat(e){let t=this.baseUrl+"/api/ai/create-chat",r={method:"POST",url:t=t.replace(/[?&]$/,""),headers:{Accept:"application/json"},cancelToken:e};return this.instance.request(r).catch(e=>{if(o(e)&&e.response)return e.response;throw e}).then(e=>this.processCreateChat(e))}processCreateChat(e){e.status;let t={};if(e.headers&&"object"==typeof e.headers)for(let r in e.headers)e.headers.hasOwnProperty(r)&&(t[r]=e.headers[r]);{let t=e.data;return Promise.resolve(JSON.parse(t))}}chat(e,t){let r=this.baseUrl+"/api/ai/chat";r=r.replace(/[?&]$/,"");let s={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(s).catch(e=>{if(o(e)&&e.response)return e.response;throw e}).then(e=>this.processChat(e))}processChat(e){e.status;let t={};if(e.headers&&"object"==typeof e.headers)for(let r in e.headers)e.headers.hasOwnProperty(r)&&(t[r]=e.headers[r]);{let t=e.data;return Promise.resolve(JSON.parse(t))}}getAllPackage(e){let t=this.baseUrl+"/api/payment/packages",r={method:"GET",url:t=t.replace(/[?&]$/,""),headers:{Accept:"application/json"},cancelToken:e};return this.instance.request(r).catch(e=>{if(o(e)&&e.response)return e.response;throw e}).then(e=>this.processGetAllPackage(e))}processGetAllPackage(e){e.status;let t={};if(e.headers&&"object"==typeof e.headers)for(let r in e.headers)e.headers.hasOwnProperty(r)&&(t[r]=e.headers[r]);{let t=e.data;return Promise.resolve(JSON.parse(t))}}createPayment(e,t){let r=this.baseUrl+"/api/payment/create-payment";r=r.replace(/[?&]$/,"");let s={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(s).catch(e=>{if(o(e)&&e.response)return e.response;throw e}).then(e=>this.processCreatePayment(e))}processCreatePayment(e){e.status;let t={};if(e.headers&&"object"==typeof e.headers)for(let r in e.headers)e.headers.hasOwnProperty(r)&&(t[r]=e.headers[r]);{let t=e.data;return Promise.resolve(JSON.parse(t))}}verifyPayment(e,t,r){let s=this.baseUrl+"/api/payment/verify-payment?";if(null==e)throw Error("The parameter 'authority' must be defined and cannot be null.");if(s+="authority="+encodeURIComponent(""+e)+"&",null==t)throw Error("The parameter 'status' must be defined and cannot be null.");s+="status="+encodeURIComponent(""+t)+"&";let a={method:"GET",url:s=s.replace(/[?&]$/,""),headers:{Accept:"application/json"},cancelToken:r};return this.instance.request(a).catch(e=>{if(o(e)&&e.response)return e.response;throw e}).then(e=>this.processVerifyPayment(e))}processVerifyPayment(e){e.status;let t={};if(e.headers&&"object"==typeof e.headers)for(let r in e.headers)e.headers.hasOwnProperty(r)&&(t[r]=e.headers[r]);{let t=e.data;return Promise.resolve(JSON.parse(t))}}}function o(e){return e&&!0===e.isAxiosError}let n=s.Z.create({baseURL:"http://localhost:3001",headers:{Authorization:void 0},transformResponse:e=>e});n.interceptors.response.use(e=>e,async e=>(e.response&&401===e.response.status&&console.log("mosys2",e),Promise.reject(e)));let i=new a(n.defaults.baseURL,n)},54339:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`/home/mst/Desktop/lowAI/frontend/src/app/auth/page.tsx#default`)},96199:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l,metadata:()=>i});var s=r(19510);r(10881);var a=r(68570);let o=(0,a.createProxy)(String.raw`/home/mst/Desktop/lowAI/frontend/src/app/auth/AuthProvider.tsx#default`),n=(0,a.createProxy)(String.raw`/home/mst/Desktop/lowAI/frontend/src/app/block/RTProvider.tsx#RTProvider`),i={icons:"favicon.ico",applicationName:"EasyWaySEO",openGraph:{siteName:"EasyWaySEO"}};function l({children:e}){return(0,s.jsxs)("html",{lang:"fa",dir:"rtl",children:[(0,s.jsxs)("head",{children:[s.jsx("title",{children:"49565194"}),s.jsx("link",{rel:"icon",href:"",sizes:"any"}),s.jsx("link",{rel:"icon",type:"image/svg+xml",href:""}),s.jsx("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),s.jsx("link",{rel:"preconnect",href:"https://fonts.gstatic.com"}),s.jsx("link",{href:"https://fonts.googleapis.com/css2?family=Nunito+Sans:ital,opsz,wght@0,6..12,200..1000;1,6..12,200..1000&family=Nunito:ital,wght@0,200..1000;1,200..1000&family=Vazirmatn:wght@100..900&display=swap",rel:"stylesheet"}),s.jsx("meta",{name:"title",content:"49565194"}),s.jsx("meta",{name:"description",content:""}),s.jsx("meta",{name:"keywords",content:""})]}),s.jsx("body",{children:s.jsx(o,{children:s.jsx(n,{children:e})})})]})}},10881:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[276,539,766,920,601,947],()=>r(31403));module.exports=s})();