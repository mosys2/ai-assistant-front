(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8836:function(e,t,r){Promise.resolve().then(r.bind(r,3337))},3337:function(e,t,r){"use strict";var s=r(7437),a=r(1021),n=r(2154),o=r(9937),i=r(2265),c=r(277),l=r(9376);t.default=()=>{let e=(0,l.useRouter)(),[t,r]=(0,i.useState)([]),[h,p]=(0,i.useState)(!0),d=async()=>{try{let e=await c.Z.getAllPackage();(null==e?void 0:e.data)&&r(e.data)}catch(e){console.error("خطا در دریافت پلن‌ها:",e)}finally{p(!1)}};(0,i.useEffect)(()=>{d()},[]);let u=async t=>{try{await c.Z.createPayment({packageId:t}).then(t=>{if(console.log(t),(null==t?void 0:t.statusCode)==401){a.ZP.warning("ابتدا وارد حساب کاربری خود شوید."),e.push("/auth");return}if(null==t?void 0:t.isSuccess){var r;e.replace(null==t?void 0:null===(r=t.data)||void 0===r?void 0:r.paymentUrl)}else a.ZP.error(t.message)})}catch(e){a.ZP.error(e.message||"مشکلی در سرور رخ داده است.")}};return(0,s.jsxs)("section",{className:"w-full max-w-5xl mx-auto py-10 mt-12",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-center mb-8 text-gray-700",children:"پلن‌های اشتراک"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:t.map(e=>(0,s.jsxs)(n.Z,{title:e.title,bordered:!0,className:"text-center rounded-xl shadow hover:shadow-lg transition duration-300",children:[(0,s.jsx)("p",{className:"text-xl font-bold text-gray-800 mb-4",children:0===e.price?"رایگان":"".concat((e.price/10).toLocaleString()," تومان")}),(0,s.jsx)(o.ZP,{type:"primary",className:"w-full px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",onClick:()=>u(e._id),children:"انتخاب پلن"})]},e._id))})]})}},277:function(e,t,r){"use strict";r.d(t,{y:function(){return o},Z:function(){return i}});var s=r(3464);class a{createOtp(e,t){let r=this.baseUrl+"/api/auth/create-otp";r=r.replace(/[?&]$/,"");let s={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(s).catch(e=>{if(n(e)&&e.response)return e.response;throw e}).then(e=>this.processCreateOtp(e))}processCreateOtp(e){e.status;let t={};if(e.headers&&"object"==typeof e.headers)for(let r in e.headers)e.headers.hasOwnProperty(r)&&(t[r]=e.headers[r]);{let t=e.data;return Promise.resolve(JSON.parse(t))}}checkOtp(e,t){let r=this.baseUrl+"/api/auth/check-otp";r=r.replace(/[?&]$/,"");let s={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(s).catch(e=>{if(n(e)&&e.response)return e.response;throw e}).then(e=>this.processCheckOtp(e))}processCheckOtp(e){e.status;let t={};if(e.headers&&"object"==typeof e.headers)for(let r in e.headers)e.headers.hasOwnProperty(r)&&(t[r]=e.headers[r]);{let t=e.data;return Promise.resolve(JSON.parse(t))}}createChat(e){let t=this.baseUrl+"/api/ai/create-chat",r={method:"POST",url:t=t.replace(/[?&]$/,""),headers:{Accept:"application/json"},cancelToken:e};return this.instance.request(r).catch(e=>{if(n(e)&&e.response)return e.response;throw e}).then(e=>this.processCreateChat(e))}processCreateChat(e){e.status;let t={};if(e.headers&&"object"==typeof e.headers)for(let r in e.headers)e.headers.hasOwnProperty(r)&&(t[r]=e.headers[r]);{let t=e.data;return Promise.resolve(JSON.parse(t))}}chat(e,t){let r=this.baseUrl+"/api/ai/chat";r=r.replace(/[?&]$/,"");let s={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(s).catch(e=>{if(n(e)&&e.response)return e.response;throw e}).then(e=>this.processChat(e))}processChat(e){e.status;let t={};if(e.headers&&"object"==typeof e.headers)for(let r in e.headers)e.headers.hasOwnProperty(r)&&(t[r]=e.headers[r]);{let t=e.data;return Promise.resolve(JSON.parse(t))}}getAllPackage(e){let t=this.baseUrl+"/api/payment/packages",r={method:"GET",url:t=t.replace(/[?&]$/,""),headers:{Accept:"application/json"},cancelToken:e};return this.instance.request(r).catch(e=>{if(n(e)&&e.response)return e.response;throw e}).then(e=>this.processGetAllPackage(e))}processGetAllPackage(e){e.status;let t={};if(e.headers&&"object"==typeof e.headers)for(let r in e.headers)e.headers.hasOwnProperty(r)&&(t[r]=e.headers[r]);{let t=e.data;return Promise.resolve(JSON.parse(t))}}createPayment(e,t){let r=this.baseUrl+"/api/payment/create-payment";r=r.replace(/[?&]$/,"");let s={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(s).catch(e=>{if(n(e)&&e.response)return e.response;throw e}).then(e=>this.processCreatePayment(e))}processCreatePayment(e){e.status;let t={};if(e.headers&&"object"==typeof e.headers)for(let r in e.headers)e.headers.hasOwnProperty(r)&&(t[r]=e.headers[r]);{let t=e.data;return Promise.resolve(JSON.parse(t))}}verifyPayment(e,t,r){let s=this.baseUrl+"/api/payment/verify-payment?";if(null==e)throw Error("The parameter 'authority' must be defined and cannot be null.");if(s+="authority="+encodeURIComponent(""+e)+"&",null==t)throw Error("The parameter 'status' must be defined and cannot be null.");s+="status="+encodeURIComponent(""+t)+"&";let a={method:"GET",url:s=s.replace(/[?&]$/,""),headers:{Accept:"application/json"},cancelToken:r};return this.instance.request(a).catch(e=>{if(n(e)&&e.response)return e.response;throw e}).then(e=>this.processVerifyPayment(e))}processVerifyPayment(e){e.status;let t={};if(e.headers&&"object"==typeof e.headers)for(let r in e.headers)e.headers.hasOwnProperty(r)&&(t[r]=e.headers[r]);{let t=e.data;return Promise.resolve(JSON.parse(t))}}constructor(e,t){this.jsonParseReviver=void 0,this.instance=t||s.Z.create(),this.baseUrl=null!=e?e:"/"}}function n(e){return e&&!0===e.isAxiosError}let o=s.Z.create({baseURL:"http://localhost:3001",headers:{Authorization:void 0},transformResponse:e=>e});o.interceptors.response.use(e=>e,async e=>(e.response&&401===e.response.status&&console.log("mosys2",e),Promise.reject(e)));var i=new a(o.defaults.baseURL,o)}},function(e){e.O(0,[177,464,107,676,832,337,154,971,117,744],function(){return e(e.s=8836)}),_N_E=e.O()}]);