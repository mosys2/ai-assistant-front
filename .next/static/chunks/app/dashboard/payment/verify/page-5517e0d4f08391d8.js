(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[985],{4492:function(e,t,s){Promise.resolve().then(s.bind(s,6328))},6328:function(e,t,s){"use strict";s.d(t,{default:function(){return P}});var r=s(7437),a=s(2265),n=s(9376),o=s(605),l=s(277),i=s(2603);let c=()=>(0,i.I0)(),h=i.v9;var p=s(5679),u=s(5795),d=s(3142),f=s(9937),m=s(2970),y=s(1770),x=e=>{let{isSuccess:t,message:s}=e,a=c(),{openPaymentModal:o}=h(e=>e.modals),l=(0,n.useRouter)();return(0,r.jsx)(u.Z,{centered:!0,open:o,onCancel:()=>a((0,p.e_)(!1)),footer:null,closable:!1,children:(0,r.jsxs)(d.Z,{direction:"vertical",size:"middle",className:"text-center w-full pb-6 px-6 sm:px-7 pt-0 relative",children:[!0===t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.nRB,{className:"text-green-600 text-4xl text-center mx-auto"}),(0,r.jsx)("h3",{className:"text-2xl text-green-600",children:"موفق"}),(0,r.jsx)("p",{children:s})]}):!1===t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y.Z,{className:"text-red-600 text-4xl text-center mx-auto"}),(0,r.jsx)("h3",{className:"text-2xl text-red-600",children:"ناموفق"}),(0,r.jsx)("p",{children:s})]}):null,(0,r.jsx)(f.ZP,{type:"primary",size:"large",shape:"round",className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",onClick:()=>{a((0,p.e_)(!1)),l.replace("/dashboard")},children:"ادامه"})]})})},P=()=>{let e=(0,n.useSearchParams)(),{status:t}=(0,o.useSession)(),s=c(),[i,h]=(0,a.useState)(null),[u,d]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let r=null==e?void 0:e.get("Authority"),a=null==e?void 0:e.get("Status");r&&a&&"authenticated"===t&&(async()=>{try{let e=await l.Z.verifyPayment(r,a);e&&(d(null==e?void 0:e.message),h(null==e?void 0:e.isSuccess),s((0,p.e_)(!0)))}catch(e){console.error(e),h(!1),d("خطا در وریفای پرداخت"),s((0,p.e_)(!0))}})()},[e,t]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x,{isSuccess:i,message:u}),(0,r.jsx)("section",{className:"w-full flex flex-col justify-center items-center"})]})}},5679:function(e,t,s){"use strict";s.d(t,{e_:function(){return a}});let r=(0,s(6518).oM)({name:"modals",initialState:{openPaymentModal:!1,openLogoutModal:!1},reducers:{openPaymentModalToggle(e,t){let{payload:s}=t;e.openPaymentModal=s},openLogoutModalToggle(e,t){let{payload:s}=t;e.openLogoutModal=s}}}),{openPaymentModalToggle:a,openLogoutModalToggle:n}=r.actions;t.ZP=r.reducer},277:function(e,t,s){"use strict";s.d(t,{y:function(){return o},Z:function(){return l}});var r=s(3464);class a{createOtp(e,t){let s=this.baseUrl+"/api/auth/create-otp";s=s.replace(/[?&]$/,"");let r={data:JSON.stringify(e),method:"POST",url:s,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(r).catch(e=>{if(n(e)&&e.response)return e.response;throw e}).then(e=>this.processCreateOtp(e))}processCreateOtp(e){e.status;let t={};if(e.headers&&"object"==typeof e.headers)for(let s in e.headers)e.headers.hasOwnProperty(s)&&(t[s]=e.headers[s]);{let t=e.data;return Promise.resolve(JSON.parse(t))}}checkOtp(e,t){let s=this.baseUrl+"/api/auth/check-otp";s=s.replace(/[?&]$/,"");let r={data:JSON.stringify(e),method:"POST",url:s,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(r).catch(e=>{if(n(e)&&e.response)return e.response;throw e}).then(e=>this.processCheckOtp(e))}processCheckOtp(e){e.status;let t={};if(e.headers&&"object"==typeof e.headers)for(let s in e.headers)e.headers.hasOwnProperty(s)&&(t[s]=e.headers[s]);{let t=e.data;return Promise.resolve(JSON.parse(t))}}createChat(e){let t=this.baseUrl+"/api/ai/create-chat",s={method:"POST",url:t=t.replace(/[?&]$/,""),headers:{Accept:"application/json"},cancelToken:e};return this.instance.request(s).catch(e=>{if(n(e)&&e.response)return e.response;throw e}).then(e=>this.processCreateChat(e))}processCreateChat(e){e.status;let t={};if(e.headers&&"object"==typeof e.headers)for(let s in e.headers)e.headers.hasOwnProperty(s)&&(t[s]=e.headers[s]);{let t=e.data;return Promise.resolve(JSON.parse(t))}}chat(e,t){let s=this.baseUrl+"/api/ai/chat";s=s.replace(/[?&]$/,"");let r={data:JSON.stringify(e),method:"POST",url:s,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(r).catch(e=>{if(n(e)&&e.response)return e.response;throw e}).then(e=>this.processChat(e))}processChat(e){e.status;let t={};if(e.headers&&"object"==typeof e.headers)for(let s in e.headers)e.headers.hasOwnProperty(s)&&(t[s]=e.headers[s]);{let t=e.data;return Promise.resolve(JSON.parse(t))}}getAllPackage(e){let t=this.baseUrl+"/api/payment/packages",s={method:"GET",url:t=t.replace(/[?&]$/,""),headers:{Accept:"application/json"},cancelToken:e};return this.instance.request(s).catch(e=>{if(n(e)&&e.response)return e.response;throw e}).then(e=>this.processGetAllPackage(e))}processGetAllPackage(e){e.status;let t={};if(e.headers&&"object"==typeof e.headers)for(let s in e.headers)e.headers.hasOwnProperty(s)&&(t[s]=e.headers[s]);{let t=e.data;return Promise.resolve(JSON.parse(t))}}createPayment(e,t){let s=this.baseUrl+"/api/payment/create-payment";s=s.replace(/[?&]$/,"");let r={data:JSON.stringify(e),method:"POST",url:s,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(r).catch(e=>{if(n(e)&&e.response)return e.response;throw e}).then(e=>this.processCreatePayment(e))}processCreatePayment(e){e.status;let t={};if(e.headers&&"object"==typeof e.headers)for(let s in e.headers)e.headers.hasOwnProperty(s)&&(t[s]=e.headers[s]);{let t=e.data;return Promise.resolve(JSON.parse(t))}}verifyPayment(e,t,s){let r=this.baseUrl+"/api/payment/verify-payment?";if(null==e)throw Error("The parameter 'authority' must be defined and cannot be null.");if(r+="authority="+encodeURIComponent(""+e)+"&",null==t)throw Error("The parameter 'status' must be defined and cannot be null.");r+="status="+encodeURIComponent(""+t)+"&";let a={method:"GET",url:r=r.replace(/[?&]$/,""),headers:{Accept:"application/json"},cancelToken:s};return this.instance.request(a).catch(e=>{if(n(e)&&e.response)return e.response;throw e}).then(e=>this.processVerifyPayment(e))}processVerifyPayment(e){e.status;let t={};if(e.headers&&"object"==typeof e.headers)for(let s in e.headers)e.headers.hasOwnProperty(s)&&(t[s]=e.headers[s]);{let t=e.data;return Promise.resolve(JSON.parse(t))}}constructor(e,t){this.jsonParseReviver=void 0,this.instance=t||r.Z.create(),this.baseUrl=null!=e?e:"/"}}function n(e){return e&&!0===e.isAxiosError}let o=r.Z.create({baseURL:"http://localhost:3001",headers:{Authorization:void 0},transformResponse:e=>e});o.interceptors.response.use(e=>e,async e=>(e.response&&401===e.response.status&&console.log("mosys2",e),Promise.reject(e)));var l=new a(o.defaults.baseURL,o)}},function(e){e.O(0,[447,177,464,605,623,337,673,971,117,744],function(){return e(e.s=4492)}),_N_E=e.O()}]);